{% extends "base.html" %}
{% load static %}
{% block content %}

  <h1>Todo List
  <a href="{% url 'task_manager:task-create' %}" class="btn btn-primary link-to-page" style="float: right">
      Add Task
    </a></h1>



  {% if task_list %}
  <ul class="list-group list-group-flush">
  {% for task in task_list %}
  <li class="list-group-item">
    <strong>{{ task.content }}</strong>
            {% if task.is_done %}
                <span class="done">Done</span>
              <form action="{% url 'task_manager:toggle_task' task.pk %}" method="post" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" style="float: right; color: white; background-color: green;">Undo</button>
                </form>
              {% else %}
              <span class="not_done">Not done</span>
              <form action="{% url 'task_manager:toggle_task' task.pk %}" method="post" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" style="float: right; color: white; background-color: grey;">Complete</button>
                </form>
            {% endif %}
            <br>
            <strong>Created:</strong> {{ task.created|date:"DATETIME_FORMAT"  }}<br>
            {% if task.deadline %}
                <strong>Deadline: </strong>{{ task.deadline|date:"DATETIME_FORMAT"  }}<br>
            {% endif %}
            <strong>Tags: </strong>{% for tag in task.tags.all %}{{ tag.name }}{% if not forloop.last %}, {% endif %}{% endfor %}
  <a href="{% url 'task_manager:task-update' pk=task.id %}" class="">
      Update
    </a>
  <a href="{% url 'task_manager:task-delete' pk=task.id %}" class="">
      Delete
    </a>

  </li>
  {% endfor %}
  </ul>
  {% else %}
  <p>There are no Tasks</p>
  {% endif %}
{% endblock %}